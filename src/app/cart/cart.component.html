<div class="cart-page-container">
  <div class="cart-header">
    <a routerLink="/" class="back-link">
      <fa-icon [icon]="icons.back"></fa-icon> Continue Shopping
    </a>
    <h2>Your Shopping Cart</h2>
  </div>

  <div *ngIf="cartItems.length === 0" class="empty-cart-message">
    <p>Your cart is currently empty.</p>
    <a routerLink="/" class="btn-primary">Start Shopping</a>
  </div>

  <div *ngIf="cartItems.length > 0" class="cart-content">
    <div class="cart-items-list">
      
      <div class="cart-item" *ngFor="let item of cartItems">
        <div class="item-image">
          <img [src]="item.product.imageURL" alt="{{ item.product.name }}">
        </div>
        
        <div class="item-details">
          <h3 class="item-name">{{ item.product.name }}</h3>
          <p class="item-brand">{{ item.product.brand }}</p>
          <div class="item-attributes">
            <span class="attribute">Size: <strong>{{ item.size }}</strong></span>
            <span class="attribute">Color: 
              <span class="color-indicator" [style.background-color]="item.color"></span>
            </span>
          </div>
        </div>

        <div class="item-price">
          <div class="price">
            Rs. {{ item.product.discountPrice ? item.product.discountPrice : item.product.price }}
          </div>
        </div>

        <div class="item-quantity-wrapper">
          <div class="quantity-controls">
            <button class="qty-btn" (click)="decrementQuantity(item)" aria-label="Decrease quantity" title="Decrease quantity">
              <fa-icon [icon]="icons.minus"></fa-icon>
            </button>
            <span class="qty-value">{{ item.quantity }}</span>
            <button class="qty-btn" (click)="incrementQuantity(item)" aria-label="Increase quantity" title="Increase quantity">
              <fa-icon [icon]="icons.plus"></fa-icon>
            </button>
          </div>
        </div>

        <div class="item-total">
          Rs. {{ (item.product.discountPrice ? item.product.discountPrice : item.product.price) * item.quantity }}
        </div>

        <button class="remove-btn" (click)="removeItem(item)" title="Remove item">
          <fa-icon [icon]="icons.delete"></fa-icon>
        </button>
      </div>

    </div>

    <div class="cart-summary">
      <h3>Order Summary</h3>
      <div class="summary-row">
        <span>Subtotal ({{ cartService.getCartCount() }} items)</span>
        <span>Rs. {{ cartService.getCartTotal() }}</span>
      </div>
      <div class="summary-row">
        <span>Shipping</span>
        <span>Free</span>
      </div>
      <div class="summary-row total-row">
        <span>Total</span>
        <span>Rs. {{ cartService.getCartTotal() }}</span>
      </div>
      <button class="btn-checkout" (click)="checkout()">Proceed to Checkout</button>
    </div>
  </div>
</div>
